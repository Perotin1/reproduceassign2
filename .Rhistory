458 %in% h1[1]
a <- list()
for(i in length(h1)){
a[[i]] <- 458 %in% h1[i]
}
a
source("isin.R")
a
length(h1)
a[[1]]
458 %in% h1[1]
458 %in% h1[2]
458 %in% h1[3]
source("isin.R")
a[[1]]
a
458 %in% h1[2]
458 %in% h1[3]
458 %in% h1[1]
head(h1)
h1[2]
458 %in% h1[2]
458 %in% h1[2][1]
458 %in% h1[2][[1]]
class(h1[2])
class(h1[1])
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
h1 <- lapply(h1,as.numeric)
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- h3[i] %in% h1
b <- names(h1)[a]
h4[[i]] <- b
}
names(h4) <- h3
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
h1 <- lapply(h1,as.numeric)
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- logical()
for(j in 1:30){
a[[j]] <- h3[i] %in% h1[j]
}
b <- names(h1)[a]
h4[[i]] <- b
}
names(h4) <- h3
head(h4)
a <- logical()
for(i in 1:30){
a[[i]] <- 33 %in% h1[i]
}
a
lapply(h1,class)
class(h3)
head(h1)
3 %in% h1$blizzard
33 %in% h1$blizzard
a <- logical()
for(i in 1:30){
a[[i]] <- 33 %in% h1[i]
}
a
?list.append
?append
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
h1 <- lapply(h1,as.numeric)
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
# for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
#        a <- logical()
#        for(j in 1:30){
#        a[[j]] <- h3[i] %in% h1[j]
#        }
#       b <- names(h1)[a]
#       h4[[i]] <- b
#}
isinh1 <- function(x){
a <- logical()
for(i in 1:30){
a[[i]] <- x %in% h1[i]
}
b <- names(h1)[a]
h4.append(b)
}
lapply(h3,isinh1)
names(h4) <- h3
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
h1 <- lapply(h1,as.numeric)
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
# for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
#        a <- logical()
#        for(j in 1:30){
#        a[[j]] <- h3[i] %in% h1[j]
#        }
#       b <- names(h1)[a]
#       h4[[i]] <- b
#}
isinh1 <- function(x){
a <- logical()
for(i in 1:30){
a[[i]] <- x %in% h1[i]
}
b <- names(h1)[a]
append(h4,b)
}
lapply(h3,isinh1)
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
h1 <- lapply(h1,as.numeric)
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
h4 <- vector("list")
# for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
#        a <- logical()
#        for(j in 1:30){
#        a[[j]] <- h3[i] %in% h1[j]
#        }
#       b <- names(h1)[a]
#       h4[[i]] <- b
#}
isinh1 <- function(x){
a <- logical()
for(i in 1:30){
a[[i]] <- x %in% h1[i]
}
b <- names(h1)[a]
append(h4,b)
}
lapply(h3,isinh1)
names(h4) <- h3
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
h1 <- lapply(h1,as.numeric)
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
h4 <- vector("list")
# for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
#        a <- logical()
#        for(j in 1:30){
#        a[[j]] <- h3[i] %in% h1[j]
#        }
#       b <- names(h1)[a]
#       h4[[i]] <- b
#}
isinh1 <- function(x){
a <- logical()
for(i in 1:30){
a[[i]] <- x %in% h1[i]
}
b <- names(h1)[a]
append(h4,b)
}
sapply(h3,isinh1)
names(h4) <- h3
h3
names(h4)
?names
length(h4)
h4
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
h1 <- lapply(h1,as.numeric)
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- logical()
for(j in 1:30){
a[[j]] <<- h3[i] %in% h1[j]
}
b <- names(h1)[a]
h4[[i]] <<- b
}
names(h4) <- h3
h4
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
h1 <- lapply(h1,as.numeric)
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- logical()
for(j in 1:30){
a[[j]] <- h3[i] %in% h1[j]
}
b <- names(h1)[a]
h4[[i]] <<- b
}
names(h4) <- h3
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
h1 <- lapply(h1,as.numeric)
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- logical()
for(j in 1:30){
a[[j]] <- h3[i] %in% h1[j]
}
b <- names(h1)[a]
h4[[i]] <- b
}
names(h4) <- h3
h4[1]
h4[2]
head(h4)
a
h3[367]
isinh1(832)
h3[367]
for(i in 1:30){print(832 %in% h1[i])}
print(832 %in% h1[1])
print(832 %in% h1[2])
832 %in% h1[1]
832 %in% h1[2]
832 %in% h1[3]
832 %in% h1[4]
832 %in% h1[5]
832 %in% h1[6]
h1
832 %in% h1[30]
h1[30]
832 %in% h1$`winter weather`
class(h1[30])
lapply(h1,class)
class(h1[29])
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
for(i in length(h1)) h1[i] <- as.numeric(h1[i])
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- logical()
for(j in 1:30){
a[[j]] <- h3[i] %in% h1[j]
}
b <- names(h1)[a]
h4[[i]] <- b
}
names(h4) <- h3
head(h4)
class(h1[29])
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
for(i in length(h1)) h1[i] <- as.numeric(h1[i])
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- logical()
for(j in 1:30){
a[[j]] <- as.numeric(h3[i]) %in% as.numeric(h1[j])
}
b <- names(h1)[a]
h4[[i]] <- b
}
names(h4) <- h3
h3[1]
h1[1]
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
for(i in length(h1)) h1[i] <- as.numeric(h1[i])
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- logical()
for(j in 1:30){
a[[j]] <- as.numeric(h3[i]) %in% h1[j]
}
b <- names(h1)[a]
h4[[i]] <- b
}
names(h4) <- h3
head(h4)
h4[lapply(h4,length)>0]
head(h1)
a <- sample(c(TRUE,FALSE),30,replace = TRUE)
a
names(h1)[a]
class(h1[29])
ht[29]
h1[29]
h3[29]
class(h3[29])
832 %in% h1[30]
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
for(i in length(h1)) h1[i] <- as.numeric(h1[i])
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- logical()
for(j in 1:30){
a[[j]] <- h3[i] %in% as.numeric(h1[j])
}
b <- names(h1)[a]
h4[[i]] <- b
}
names(h4) <- h3
rel_data <- data[,c("BGN_DATE","END_DATE","EVTYPE","FATALITIES","INJURIES","REMARKS")]
trim.leading <- function (x)  sub("^\\s+", "", x)
rel_data$EVTYPE <- trim.leading(rel_data$EVTYPE)
g <- rel_data[!(rel_data$EVTYPE %in% ev_table),] ##removes exact matches
g1 <- setdiff(rel_data$EVTYPE, ev_table) ##gets typo evtypes
h1 <- sapply(ev_table, grep, x = g1) ##gets indexes of partial matches to typo evtypes
h1 <- h1[lapply(h1,length)>0] ## removes empties
for(i in length(h1)) h1[i] <- as.integer(h1[i])
## h1_intersect <- function(l){
##        nms <- combn( names(l) , 2 , FUN = paste0 , collapse = "_" , simplify = FALSE )
##        ll <- combn( l , 2 , simplify = FALSE )
##        out <- lapply( ll , function(x) intersect( x[[1]] , x[[2]] )  )
##        setNames( out , nms )
##}
##h2 <- h1_intersect(h1)
##h2 <- h2[lapply(h2,length)>0]
h3 <- unique(unlist(h1))
N <- 367
h4 <- vector("list", N)
for(i in 1:N) { ## trying to get function to return index of lists of which h3[i] is an element
a <- logical()
for(j in 1:30){
a[[j]] <- h3[i] %in% as.integer(h1[j])
}
b <- names(h1)[a]
h4[[i]] <- b
}
names(h4) <- h3
b <- as.data.frame(h1)
